<!doctype html>
<html>
    <head>
        <title>My experiment</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="jspsych-5.0.3/jspsych.js"></script>
        <script src="jspsych-5.0.3/plugins/jspsych-text.js"></script>
		<script src="jspsych-5.0.3/plugins/jspsych-single-stim.js"></script>
		<script src="jspsych-5.0.3/plugins/jspsych-button-response.js"></script>
        <link href="jspsych-5.0.3/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    </head>
    <body>
    </body>
    <script>

	//shuffle array in place
	function shuffle(a) {
		var j, x, i;
		for (i = a.length; i; i--) {
			j = Math.floor(Math.random() * i);
			x = a[i - 1];
			a[i - 1] = a[j];
			a[j] = x;
		}
	}
	
	/* TESTING
	var cue = {
	type: 'text',
	text: 'Furniture >>>',	
	timing_stim: 1000
	};
		
	
	var target1 = {
    type: 'button-response',
    stimulus: 'img/F01.jpg',
    choices: ['F'],
	timing_stim: 750
    };
	
	var mask1 = {
	type: 'img/single-stim',
	stimulus: 'scr_F01.jpg',
	timing_stim: 750
	};*/
	
	//array of targets
	var targets = [
	F01.jpg, F02.jpg, F03.jpg, F04.jpg, F05.jpg, F06.jpg, F07.jpg, F08.jpg, F09.jpg, F10.jpg, F11.jpg, F12.jpg, F13.jpg, F14.jpg, F15.jpg, 
	F16.jpg, F17.jpg, F18.jpg, F19.jpg, F20.jpg, F21.jpg, F22.jpg, F23.jpg, F24.jpg, F25.jpg, F26.jpg, F27.jpg, F28.jpg, F29.jpg, F30.jpg, 
	F31.jpg, F32.jpg, F33.jpg, F34.jpg, F35.jpg, F36.jpg, F37.jpg, F38.jpg, F39.jpg, F40.jpg, F41.jpg, F42.jpg, F43.jpg, F44.jpg, F45.jpg, 
	F46.jpg, F47.jpg, F48.jpg, F49.jpg, F50.jpg, F51.jpg, F52.jpg, F53.jpg, F54.jpg, F55.jpg, F56.jpg, F57.jpg, F58.jpg, F59.jpg, F60.jpg, 
	F61.jpg, F62.jpg, F63.jpg, F64.jpg, F65.jpg, F66.jpg, F67.jpg, F68.jpg, F69.jpg, F70.jpg, G01.jpg, G02.jpg, G03.jpg, G04.jpg, G05.jpg, 
	G06.jpg, G07.jpg, G08.jpg, G09.jpg, G10.jpg, G11.jpg, G12.jpg, G13.jpg, G14.jpg, G15.jpg, G16.jpg, G17.jpg, G18.jpg, G19.jpg, G20.jpg, 
	G21.jpg, G22.jpg, G23.jpg, G24.jpg, G25.jpg, G26.jpg, G27.jpg, G28.jpg, G29.jpg, G30.jpg, G31.jpg, G32.jpg, G33.jpg, G34.jpg, G35.jpg, 
	G36.jpg, G37.jpg, G38.jpg, G39.jpg, G40.jpg, G41.jpg, G42.jpg, G43.jpg, G44.jpg, G45.jpg, G46.jpg, G47.jpg, G48.jpg, G49.jpg, G50.jpg, 
	G51.jpg, G52.jpg, G53.jpg, G54.jpg, G55.jpg, G56.jpg, G57.jpg, G58.jpg, G59.jpg, G60.jpg, G61.jpg, G62.jpg, G63.jpg, G64.jpg, G65.jpg, 
	G66.jpg, G67.jpg, G68.jpg, G69.jpg, G70.jpg
	];
	
	//array of masks
	var masks = [
	scr_F01.jpg, scr_F02.jpg, scr_F03.jpg, scr_F04.jpg, scr_F05.jpg, scr_F06.jpg, scr_F07.jpg, scr_F08.jpg, scr_F09.jpg, scr_F10.jpg, scr_F11.jpg, 
	scr_F12.jpg, scr_F13.jpg, scr_F14.jpg, scr_F15.jpg, scr_F16.jpg, scr_F17.jpg, scr_F18.jpg, scr_F19.jpg, scr_F20.jpg, scr_F21.jpg, scr_F22.jpg, 
	scr_F23.jpg, scr_F24.jpg, scr_F25.jpg, scr_F26.jpg, scr_F27.jpg, scr_F28.jpg, scr_F29.jpg, scr_F30.jpg, scr_F31.jpg, scr_F32.jpg, scr_F33.jpg, 
	scr_F34.jpg, scr_F35.jpg, scr_F36.jpg, scr_F37.jpg, scr_F38.jpg, scr_F39.jpg, scr_F40.jpg, scr_F41.jpg, scr_F42.jpg, scr_F43.jpg, scr_F44.jpg, 
	scr_F45.jpg, scr_F46.jpg, scr_F47.jpg, scr_F48.jpg, scr_F49.jpg, scr_F50.jpg, scr_F51.jpg, scr_F52.jpg, scr_F53.jpg, scr_F54.jpg, scr_F55.jpg, 
	scr_F56.jpg, scr_F57.jpg, scr_F58.jpg, scr_F59.jpg, scr_F60.jpg, scr_F61.jpg, scr_F62.jpg, scr_F63.jpg, scr_F64.jpg, scr_F65.jpg, scr_F66.jpg, 
	scr_F67.jpg, scr_F68.jpg, scr_F69.jpg, scr_F70.jpg, scr_G01.jpg, scr_G02.jpg, scr_G03.jpg, scr_G04.jpg, scr_G05.jpg, scr_G06.jpg, scr_G07.jpg, 
	scr_G08.jpg, scr_G09.jpg, scr_G10.jpg, scr_G11.jpg, scr_G12.jpg, scr_G13.jpg, scr_G14.jpg, scr_G15.jpg, scr_G16.jpg, scr_G17.jpg, scr_G18.jpg, 
	scr_G19.jpg, scr_G20.jpg, scr_G21.jpg, scr_G22.jpg, scr_G23.jpg, scr_G24.jpg, scr_G25.jpg, scr_G26.jpg, scr_G27.jpg, scr_G28.jpg, scr_G29.jpg, 
	scr_G30.jpg, scr_G31.jpg, scr_G32.jpg, scr_G33.jpg, scr_G34.jpg, scr_G35.jpg, scr_G36.jpg, scr_G37.jpg, scr_G38.jpg, scr_G39.jpg, scr_G40.jpg, 
	scr_G41.jpg, scr_G42.jpg, scr_G43.jpg, scr_G44.jpg, scr_G45.jpg, scr_G46.jpg, scr_G47.jpg, scr_G48.jpg, scr_G49.jpg, scr_G50.jpg, scr_G51.jpg, 
	scr_G52.jpg, scr_G53.jpg, scr_G54.jpg, scr_G55.jpg, scr_G56.jpg, scr_G57.jpg, scr_G58.jpg, scr_G59.jpg, scr_G60.jpg, scr_G61.jpg, scr_G62.jpg, 
	scr_G63.jpg, scr_G64.jpg, scr_G65.jpg, scr_G66.jpg, scr_G67.jpg, scr_G68.jpg, scr_G69.jpg, scr_G70.jpg, scr_T01.jpg, scr_T02.jpg, scr_T03.jpg, 
	scr_T04.jpg, scr_T05.jpg, scr_T06.jpg, scr_T07.jpg, scr_T08.jpg, scr_T09.jpg, scr_T10.jpg, scr_T11.jpg, scr_T12.jpg, scr_T13.jpg, scr_T14.jpg, 
	scr_T15.jpg, scr_T16.jpg, scr_T17.jpg, scr_T18.jpg, scr_T19.jpg, scr_T20.jpg, scr_T21.jpg, scr_T22.jpg, scr_T23.jpg, scr_T24.jpg, scr_T25.jpg, 
	scr_T26.jpg, scr_T27.jpg, scr_T28.jpg, scr_T29.jpg, scr_T30.jpg, scr_T31.jpg, scr_T32.jpg, scr_T33.jpg, scr_T34.jpg, scr_T35.jpg, scr_T36.jpg, 
	scr_T37.jpg, scr_T38.jpg, scr_T39.jpg, scr_T40.jpg, scr_T41.jpg, scr_T42.jpg, scr_T43.jpg, scr_T44.jpg, scr_T45.jpg, scr_T46.jpg, scr_T47.jpg, 
	scr_T48.jpg, scr_T49.jpg, scr_T50.jpg, scr_T51.jpg, scr_T52.jpg, scr_T53.jpg, scr_T54.jpg, scr_T55.jpg, scr_T56.jpg, scr_T57.jpg, scr_T58.jpg, 
	scr_T59.jpg, scr_T60.jpg, scr_T61.jpg, scr_T62.jpg, scr_T63.jpg, scr_T64.jpg, scr_T65.jpg, scr_T66.jpg, scr_T67.jpg, scr_T68.jpg, scr_T69.jpg, 
	scr_T70.jpg
	];
	
	//path to images
	var path = 'img/';
	
	//initialize block
	block = [];
	
	//initialize trial array
	trial[];
	
	//iterate over trials here
	for (i = 0; i < 25; i++){
				
		//shuffle targets
		shuffle(targets);
		
		//shuffle masks
		shuffle(masks);
		
		//select slow or fast trial
		var speed = Math.floor(Math.random() * 2);
		
		//start with fixation
		trial[i].push(fixation);
		
		//initialize stimuli arrays
		trial_target = [];
		trial_mask = [];
		
		//low speed
		if (speed == 0){
	
			//for each trial
			for (j = 0; j < 6; j++){
			
				trial_target[j] = {
				type: 'button-response',
				stimulus: path.concat(targets[j]),
				duration: 750
				};
				
				trial_mask[j] = {
				type: 'single-stim',
				stimulus: path.concat(masks[j]),
				duration: 750
				};
					
				trial[i].push(trial_target[j]);
				trial[i].push(trial_mask[j]);
			};
		
		};
		
		//high speed
		if (speed == 1){
		
			//for each trial
			for (j = 0; j < 12; j++){
			
				trial_target[j] = {
				type: 'button-response',
				stimulus: path.concat(targets[j]),
				duration: 75
				};
				
				trial_mask[j] = {
				type: 'single-stim',
				stimulus: path.concat(masks[j]),
				duration: 75
				};
					
				trial[i].push(trial_target[j]);
				trial[i].push(trial_mask[j]);
			};
		
		};
		
		//add trials to block
		block.push(trial[i]);
		
	};
		
	/* start the experiment */
    jsPsych.init({
      timeline: block
    });

    </script>
</html>